<!DOCTYPE html>
<!-- Profile Recorder in its simplest form -->
<html>
  <head>
    
    <!-- style area -->
    <style>
      /*comment for style area*/
      main {
        height: 350px;
      }
      footer{
        text-align: center;
      }
      #sec0 {
        text-align: center;
      }
      #sec1 {
        text-align: center;
      }
      </style>
      
    <!-- title and description area -->
    <meta charset="UTF-8">
    <meta name="description" content="This is a program that provides a form for a simple data gathering">
    <title>Profile Recorder</title>
      
  </head>
    
  <body>
    <header>
      <section id="sec0">
        <h1>Profile Recorder</h1>
        <p>Simple program that records data provided by the user.</p>
      </section>      
    </header>
    
    <br/><hr/><br/>
    
    <main>
      <!-- Main Section for the intended program -->
      <section id="sec1">
        
        <h2>Let's Record</h2>
        <p>Fill out the form then click submit.</p>
        
        <form id="profileForm">
          <label for="screenName">Screen Name:</label><br>
          <input type="text" id="screenName" name="screenName" required><br><br>
          
          <label for="gender">Gender:</label><br>
          <input type="text" id="gender" name="gender" required><br><br>
          
          <label for="age">Age:</label><br>
          <input type="number" id="age" name="age" required><br><br>
          
          <label for="food">Favorite Food:</label><br>
          <input type="text" id="food" name="food" required><br><br>
          
          <button type="submit">Submit</button>
        </form>
        
      </section>
      
    </main>
    
    <br/><hr/><br/>
    
    <footer>
      <p>Contact</p>
      <p>E-mail : marcsnl@proton.me</p>
    </footer>
    
    <!-- script area -->
    <script>
      //comment for script area
      document.getElementById("profileForm").addEventListener("submit", function(event) {
        event.preventDefault();

        const screenName = document.getElementById("screenName").value;
        const gender = document.getElementById("gender").value;
        const age = document.getElementById("age").value;
        const food = document.getElementById("food").value;

        // Format data as CSV
        const csvHeaders = "Screen Name,Gender,Age,Favorite Food\n";
        const csvData = `${screenName},${gender},${age},${food}\n`;
        const csvContent = csvHeaders + csvData;

        // Create Blob and trigger download
        const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.setAttribute("href", url);
        link.setAttribute("download", "profile.csv");
        link.style.display = "none";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        alert("Profile recorded and downloaded successfully!");
      });
    </script>
    
  </body>
</html>